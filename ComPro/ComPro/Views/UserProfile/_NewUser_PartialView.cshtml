@model IEnumerable<ComPro.Models.User_Approval_Model>

<div class="alert alert-success alert-dismissible fade hide" role="alert" id="MessageSuccess">
    <strong>Thanks !</strong>  New Member Is Successfully Approved .
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="alert alert-danger alert-dismissible fade hide" role="alert" id="MessageFail">
    <strong>Sorry !</strong>  Invalid Attempt. Please Try Again .
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>

        <th>
            @Html.DisplayNameFor(model => model.Phone)
        </th>

        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>


                <a href="#" onClick="MemberDetails(@item.Id)" ;>@item.Name</a>
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Phone)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @if (User.IsInRole(ComPro.Models.Enums.UserRole.Administrator.ToString()))
                {<div class="col-md-offset-2 col-md-10">
    @*<a href="@Url.Action("Approve","UserProfile", new { Email = item.Email })" class="btn btn-default">Approve</a>*@
   <a href="#" class="card-link btn btn-primary" onClick="Approval(@item.Id)" name="NewMember" id="NewMember">Approve</a>
    
</div>
                }

            </td>
        </tr>
    }

</table>

<script>
    function MemberDetails(id) {
        var id = id;
        var url = "/UserProfile/Details";

        $.ajax({

            url: url,
            data: { id: id },

            success: function (data) {
                $('#Detailscontainer2').html(data);
                $('#MemDetails').modal();
            }

        });

    }

    function Approval(id) {

        var url = "/UserProfile/Approve";
        
        var request = $.ajax({

            url: url,
            data: { id: id },
        })

        request.done(function (msg) {

            if (msg == "True") {
                $("#MemberList").load("/UserProfile/NewUser");
                $("#MessageFail").removeClass("hide");
                $("#MessageSuccess").addClass("show");

               
            }
            else {
                $("#MessageSuccess").removeClass("hide");
                $("#MessageFail").addClass("show");

            }



        });

    }

    

   


</script>

<div id="Detailscontainer2">

</div>



